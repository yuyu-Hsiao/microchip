# USB 電烙鐵控制系統

## 專案概述
本專案是一個 USB 電烙鐵控制系統，透過 USB-C 介面為電烙鐵提供電力並控制其功率輸出，實現精確的溫度調節。系統基於 **PIC12F1822** 微控制器運行，使用 PWM（脈衝寬度調變）技術來精準控制加熱功率，以達到穩定的焊接溫度。

## 功能特色
- **功率控制**：透過 PWM 控制電力輸出，並調整溫度以適應不同焊接需求。
- **溫度監控**：即時監控電壓和電流，計算功率並自動調整 PWM 輸出。
- **LED 指示**：透過紅、綠 LED 燈顯示裝置狀態（電源開啟、溫度調整、關機倒數提醒）。
- **按鍵功能**：透過按鍵進行電源開關、功率調整及模式切換。

## 系統架構與程式碼概述

### 1. `main.c` - 主程式邏輯
- **系統初始化**：設置時鐘頻率、初始化各項參數並啟動中斷。
- **主迴圈**：持續監控按鍵操作、PWM 更新、溫度調節等。
- **按鍵服務**：通過函式 `keybroad()` 處理按鍵輸入，支援短按/長按操作。
- **功率控制**：根據電壓與電流的 ADC 值進行功率計算，並通過 `pwm_set()` 調整 PWM 比例。

### 2. `user.c` - 功能函式
- **PWM 控制**：`pwm_out()` 函式根據溫度需求控制輸出功率。
- **ADC 取樣與轉換**：`adc_sub()` 進行電壓和電流的 ADC 取樣，並計算平均值作為功率控制依據。
- **LED 指示燈控制**：`led()` 函式控制紅綠 LED 的亮滅，反映當前工作狀態。
- **電源管理**：`power_on()` 和 `power_off()` 控制系統開關，並根據倒數計時提醒即將關機。
- **記憶體儲存**：提供 EEPROM 存取功能，記錄功率設置以便下次開機恢復。

### 3. `user.h` - 定義與全域變數
- **常數與變數定義**：定義功率參數、按鍵計時、LED 狀態等全域變數。
- **PWM 計算表**：基於不同的功率設定，提供 PWM 對應值表以進行輸出控制。
- **GPIO 定義**：設置綠色 LED、紅色 LED、按鍵輸入及 PWM 輸出等引腳。

### 4. `USB電烙鐵.pdf` - 電路設計文件
該文件包含了 USB 電烙鐵的電路設計圖，顯示了電路中的各主要元件及其連接方式。系統使用 USB Type-C 供電，並經由 PIC12F1822 微控制器進行功率管理。

## 系統運作流程
1. **啟動系統**：按下按鍵啟動電烙鐵，LED 指示燈亮起，表示系統進入工作模式。
2. **功率調節**：系統根據當前設定的溫度需求調整 PWM 輸出，以維持目標溫度。
3. **溫度監控**：系統持續進行電壓和電流的 ADC 取樣，計算實際功率並進行調節。
4. **LED 指示**：綠燈表示正常工作狀態，紅燈閃爍表示即將關機提醒。
5. **關機**：再次按下按鍵即可關閉電源，並切斷 PWM 輸出。

## 安裝與使用
1. **硬體準備**：接線至 USB-C 電源，並連接至 PIC12F1822 微控制器。
2. **編譯與燒錄**：使用適當的 IDE (如 MPLAB X) 編譯程式碼並燒錄至微控制器。
3. **運行**：通過 USB-C 接口供電，並使用按鍵進行電源及功率的調節控制。

## 目錄結構
```plaintext
├── main.c          # 主程式
├── user.c          # 各功能函式
├── user.h          # 定義與全域變數
├── USB電烙鐵.pdf   # 電路圖
